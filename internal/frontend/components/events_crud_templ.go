// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.865
package components

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"git.iu7.bmstu.ru/ped22u691/PPO.git/internal/models/json_req_resp"
	"time"
)

func EventsCRUDPage(tokenKey string, events []jsonreqresp.EventResponse, artworks []jsonreqresp.ArtworkResponse) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templ.JSONScript("artworksJSON", artworks).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"crud-container\" id=\"eventsContainer\"><!-- –û—Å–Ω–æ–≤–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π --><div class=\"modal\" id=\"eventModal\" style=\"display: none;\"><div class=\"modal-content\" onclick=\"event.stopPropagation()\"><h3 id=\"modalTitle\">–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</h3><form id=\"eventForm\" onsubmit=\"return handleEventFormSubmit(event)\"><input type=\"hidden\" id=\"eventId\"><div class=\"form-group\"><label>–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</label> <input type=\"text\" id=\"eventTitle\" required minlength=\"2\" maxlength=\"100\"></div><div class=\"form-group\"><label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label> <input type=\"datetime-local\" id=\"dateBegin\" required></div><div class=\"form-group\"><label>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label> <input type=\"datetime-local\" id=\"dateEnd\" required></div><div class=\"form-group\"><label>–ê–¥—Ä–µ—Å</label> <input type=\"text\" id=\"address\" required minlength=\"2\" maxlength=\"200\"></div><div class=\"form-group\"><label>–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –ø–æ—Å–µ—â–µ–Ω–∏—è</label> <select id=\"canVisit\" required><option value=\"true\">–î–∞</option> <option value=\"false\">–ù–µ—Ç</option></select></div><div class=\"form-group\"><label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤</label> <input type=\"number\" id=\"cntTickets\" required min=\"0\"></div><div class=\"form-actions\"><button type=\"button\" onclick=\"closeModal()\">–û—Ç–º–µ–Ω–∞</button> <button type=\"submit\" id=\"submitButton\">–î–æ–±–∞–≤–∏—Ç—å</button></div></form></div></div><!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è–º–∏ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏ --><div class=\"modal\" id=\"artworksModal\" style=\"display: none;\"><div class=\"modal-content wide-modal\" onclick=\"event.stopPropagation()\"><h3 id=\"artworksModalTitle\">–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏</h3><input type=\"hidden\" id=\"currentEventId\"><div class=\"artworks-management\"><div class=\"available-artworks\"><h4>–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è</h4><div class=\"artworks-list\" id=\"availableArtworks\"><!-- –°–ø–∏—Å–æ–∫ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —á–µ—Ä–µ–∑ JS --></div></div><div class=\"artworks-actions\"><button onclick=\"addSelectedArtworks()\">–î–æ–±–∞–≤–∏—Ç—å ‚Üí</button> <button onclick=\"removeSelectedArtworks()\">‚Üê –£–¥–∞–ª–∏—Ç—å</button></div><div class=\"event-artworks\"><h4>–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏</h4><div class=\"artworks-list\" id=\"eventArtworks\"><!-- –°–ø–∏—Å–æ–∫ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω —á–µ—Ä–µ–∑ JS --></div></div></div><div class=\"form-actions\"><button type=\"button\" onclick=\"closeArtworksModal()\">–ó–∞–∫—Ä—ã—Ç—å</button></div></div></div><!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å --><div class=\"crud-header\"><h2>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h2><button class=\"add-button\" onclick=\"resetAndOpenModal()\">+ –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</button></div><!-- –¢–∞–±–ª–∏—Ü–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π --><table class=\"crud-table\"><thead><tr><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–î–∞—Ç—ã –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è</th><th>–ê–¥—Ä–µ—Å</th><th>–î–æ—Å—Ç—É–ø–Ω–æ</th><th>–ë–∏–ª–µ—Ç—ã</th><th>–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr></thead> <tbody>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for _, event := range events {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<tr><td>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var3 string
				templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(event.Title)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/frontend/components/events_crud.templ`, Line: 146, Col: 45}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "</td><td>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var4 string
				templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(event.DateBegin.Format("02.01.2006 15:04"))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/frontend/components/events_crud.templ`, Line: 148, Col: 76}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, " -<br>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var5 string
				templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(event.DateEnd.Format("02.01.2006 15:04"))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/frontend/components/events_crud.templ`, Line: 149, Col: 74}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</td><td>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var6 string
				templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(event.Address)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/frontend/components/events_crud.templ`, Line: 151, Col: 47}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "</td><td>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				if event.CanVisit {
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "<span class=\"status-active\">–î–∞</span>")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				} else {
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "<span class=\"status-inactive\">–ù–µ—Ç</span>")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "</td><td>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var7 string
				templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(event.CntTickets)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/frontend/components/events_crud.templ`, Line: 159, Col: 50}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "</td><td>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templ.RenderScriptItems(ctx, templ_7745c5c3_Buffer, templ.JSFuncCall("openArtworksManagement", event.ID, event.Title))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "<button class=\"manage-artworks-btn\" onclick=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var8 templ.ComponentScript = templ.JSFuncCall("openArtworksManagement", event.ID, event.Title)
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var8.Call)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "\">–£–ø—Ä–∞–≤–ª—è—Ç—å (")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var9 string
				templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(len(event.ArtworkIDs))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/frontend/components/events_crud.templ`, Line: 164, Col: 76}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, ")</button></td><td class=\"actions\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templ.RenderScriptItems(ctx, templ_7745c5c3_Buffer, templ.JSFuncCall("prepareEditModal",
					event.ID,
					event.Title,
					event.DateBegin.Format(time.RFC3339),
					event.DateEnd.Format(time.RFC3339),
					event.Address,
					event.CanVisit,
					event.CntTickets))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "<button class=\"edit-btn\" onclick=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var10 templ.ComponentScript = templ.JSFuncCall("prepareEditModal",
					event.ID,
					event.Title,
					event.DateBegin.Format(time.RFC3339),
					event.DateEnd.Format(time.RFC3339),
					event.Address,
					event.CanVisit,
					event.CntTickets)
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var10.Call)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "\">‚úèÔ∏è</button> ")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templ.RenderScriptItems(ctx, templ_7745c5c3_Buffer, templ.JSFuncCall("confirmDeleteEvent", event.ID))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "<button class=\"delete-btn\" onclick=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var11 templ.ComponentScript = templ.JSFuncCall("confirmDeleteEvent", event.ID)
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var11.Call)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, "\">üóëÔ∏è</button></td></tr>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, "</tbody></table><!-- –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API --><script>\n                const ACCESS_TOKEN_KEY = \"@tokenKey\";\n                const ALL_ARTWORKS = JSON.parse(document.getElementById('artworksJSON').textContent);\n                \n                // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n                let isEditing = false;\n                let currentEvent = {\n                    id: '',\n                    title: '',\n                    dateBegin: '',\n                    dateEnd: '',\n                    address: '',\n                    canVisit: true,\n                    cntTickets: 0\n                };\n\n                // –≠–ª–µ–º–µ–Ω—Ç—ã DOM\n                const eventModal = document.getElementById('eventModal');\n                const artworksModal = document.getElementById('artworksModal');\n                const modalTitle = document.getElementById('modalTitle');\n                const artworksModalTitle = document.getElementById('artworksModalTitle');\n                const submitButton = document.getElementById('submitButton');\n                const eventForm = document.getElementById('eventForm');\n                const eventIdInput = document.getElementById('eventId');\n                const eventTitleInput = document.getElementById('eventTitle');\n                const dateBeginInput = document.getElementById('dateBegin');\n                const dateEndInput = document.getElementById('dateEnd');\n                const addressInput = document.getElementById('address');\n                const canVisitInput = document.getElementById('canVisit');\n                const cntTicketsInput = document.getElementById('cntTickets');\n                const currentEventIdInput = document.getElementById('currentEventId');\n                const availableArtworksList = document.getElementById('availableArtworks');\n                const eventArtworksList = document.getElementById('eventArtworks');\n\n                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω\n                function openModal() {\n                    eventModal.style.display = 'flex';\n                }\n\n                function closeModal() {\n                    eventModal.style.display = 'none';\n                    window.location.reload();\n                }\n\n                function openArtworksModal() {\n                    artworksModal.style.display = 'flex';\n                }\n\n                function closeArtworksModal() {\n                    artworksModal.style.display = 'none';\n                    window.location.reload();\n                }\n\n                // –ö–ª–∏–∫ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞\n                eventModal.addEventListener('click', function(e) {\n                    if (e.target === eventModal) {\n                        closeModal();\n                    }\n                });\n\n                artworksModal.addEventListener('click', function(e) {\n                    if (e.target === artworksModal) {\n                        closeArtworksModal();\n                    }\n                });\n\n                function resetAndOpenModal() {\n                    console.log('–¢–æ–∫–µ–Ω:', localStorage.getItem(ACCESS_TOKEN_KEY));\n                    isEditing = false;\n                    currentEvent = { \n                        id: '', \n                        title: '', \n                        dateBegin: new Date().toISOString().slice(0, 16),\n                        dateEnd: new Date(Date.now() + 3600000).toISOString().slice(0, 16),\n                        address: '',\n                        canVisit: true,\n                        cntTickets: 0\n                    };\n                    updateFormFields();\n                    modalTitle.textContent = '–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ';\n                    submitButton.textContent = '–î–æ–±–∞–≤–∏—Ç—å';\n                    openModal();\n                }\n\n                function prepareEditModal(id, title, dateBegin, dateEnd, address, canVisit, cntTickets) {\n                    isEditing = true;\n                    currentEvent = {\n                        id: id,\n                        title: title,\n                        dateBegin: dateBegin,\n                        dateEnd: dateEnd,\n                        address: address,\n                        canVisit: canVisit,\n                        cntTickets: cntTickets\n                    };\n                    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –¥–∞—Ç—ã ISO –≤ —Ñ–æ—Ä–º–∞—Ç datetime-local\n                    const formatForInput = (isoString) => {\n                        const dt = new Date(isoString);\n                        return dt.toISOString().slice(0, 16);\n                    };\n                    \n                    updateFormFields();\n                    modalTitle.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ';\n                    submitButton.textContent = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å';\n                    openModal();\n                }\n\n                function updateFormFields() {\n                    eventIdInput.value = currentEvent.id;\n                    eventTitleInput.value = currentEvent.title;\n                    dateBeginInput.value = currentEvent.dateBegin.slice(0, 16);\n                    dateEndInput.value = currentEvent.dateEnd.slice(0, 16);\n                    addressInput.value = currentEvent.address;\n                    canVisitInput.value = currentEvent.canVisit;\n                    cntTicketsInput.value = currentEvent.cntTickets;\n                }\n\n                async function openArtworksManagement(eventId, eventTitle) {\n                    currentEventIdInput.value = eventId;\n                    await loadArtworksForEvent(eventId);\n                    artworksModalTitle.textContent = `–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è–º–∏ (${eventTitle})`;\n                    openArtworksModal();\n                }\n\n                async function loadArtworksForEvent(eventId) {\n                    try {\n                        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏\n                        const response = await fetch(`/api/v1/employee/events/${eventId}/artworks`, {\n                            headers: {\n                                'Authorization': `Bearer ${localStorage.getItem(ACCESS_TOKEN_KEY)}`\n                            }\n                        });\n                        \n                        if (!response.ok) throw await response.json();\n                        \n                        const eventArtworks = await response.json();\n                        renderArtworksLists(eventArtworks);\n                    } catch (error) {\n                        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π:', error);\n                        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è');\n                    }\n                }\n\n                function renderArtworksLists(eventArtworks) {\n                    // –û—á–∏—â–∞–µ–º —Å–ø–∏—Å–∫–∏\n                    availableArtworksList.innerHTML = '';\n                    eventArtworksList.innerHTML = '';\n                    \n                    // –°–æ–±–∏—Ä–∞–µ–º ID –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏\n                    const eventArtworkIds = new Set(eventArtworks.map(aw => aw.id));\n                    \n                    // –†–∞–∑–¥–µ–ª—è–µ–º –≤—Å–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ\n                    ALL_ARTWORKS.forEach(artwork => {\n                        const artworkElement = `\n                            <div class=\"artwork-item\">\n                                <input type=\"checkbox\" id=\"artwork-${artwork.id}\" value=\"${artwork.id}\">\n                                <label for=\"artwork-${artwork.id}\">${artwork.title} (${artwork.author.name})</label>\n                            </div>\n                        `;\n                        \n                        if (eventArtworkIds.has(artwork.id)) {\n                            eventArtworksList.innerHTML += artworkElement;\n                        } else {\n                            availableArtworksList.innerHTML += artworkElement;\n                        }\n                    });\n                }\n\n                async function addSelectedArtworks() {\n                    const eventId = currentEventIdInput.value;\n                    const checkboxes = availableArtworksList.querySelectorAll('input[type=\"checkbox\"]:checked');\n                    \n                    if (checkboxes.length === 0) {\n                        alert('–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è');\n                        return;\n                    }\n                    \n                    try {\n                        // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞–∂–¥–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø–æ –æ–¥–Ω–æ–º—É\n                        for (const checkbox of checkboxes) {\n                            const response = await fetch(`/api/v1/employee/events/${eventId}`, {\n                                method: 'PUT',\n                                headers: { \n                                    'Content-Type': 'application/json',\n                                    'Authorization': `Bearer ${localStorage.getItem(ACCESS_TOKEN_KEY)}`\n                                },\n                                body: JSON.stringify({\n                                    artworkID: checkbox.value\n                                })\n                            });\n                            \n                            if (!response.ok) throw await response.json();\n                        }\n                        \n                        await loadArtworksForEvent(eventId);\n                    } catch (error) {\n                        console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π:', error);\n                        alert(error.error || '–ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è');\n                    }\n                }\n\n                async function removeSelectedArtworks() {\n                    const eventId = currentEventIdInput.value;\n                    const checkboxes = eventArtworksList.querySelectorAll('input[type=\"checkbox\"]:checked');\n                    \n                    if (checkboxes.length === 0) {\n                        alert('–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è');\n                        return;\n                    }\n                    \n                    try {\n                        // –£–¥–∞–ª—è–µ–º –∫–∞–∂–¥–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø–æ –æ–¥–Ω–æ–º—É\n                        for (const checkbox of checkboxes) {\n                            const response = await fetch(`/api/v1/employee/events/${eventId}`, {\n                                method: 'DELETE',\n                                headers: {\n                                    'Content-Type': 'application/json',\n                                    'Authorization': `Bearer ${localStorage.getItem(ACCESS_TOKEN_KEY)}`\n                                },\n                                body: JSON.stringify({\n                                    artworkID: checkbox.value // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–¥–∏–Ω artworkID\n                                })\n                            });\n                            \n                            if (!response.ok) {\n                                const error = await response.json();\n                                throw error;\n                            }\n                        }\n                        \n                        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ –≤—Å–µ—Ö —É–¥–∞–ª–µ–Ω–∏–π\n                        await loadArtworksForEvent(eventId);\n                    } catch (error) {\n                        console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π:', error);\n                        alert(error.error || '–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è');\n                    }\n                }\n\n                async function handleEventFormSubmit(event) {\n                    event.preventDefault();\n                    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –¥–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç ISO 8601\n                    const dateBegin = new Date(dateBeginInput.value).toISOString();\n                    const dateEnd = new Date(dateEndInput.value).toISOString();\n\n                    const formData = {\n                        title: eventTitleInput.value,\n                        dateBegin: dateBegin,\n                        dateEnd: dateEnd,\n                        address: addressInput.value,\n                        canVisit: canVisitInput.value === 'true',\n                        cntTickets: parseInt(cntTicketsInput.value)\n                    };\n                    console.log('formData:', formData);\n                    if (isEditing) {\n                        formData.id = eventIdInput.value;\n                        await updateEvent(formData);\n                    } else {\n                        await addEvent(formData);\n                    }\n                }\n\n                async function confirmDeleteEvent(id) {\n                    if (!confirm('–£–¥–∞–ª–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) return;\n                    await deleteEvent(id);\n                }\n\n                // API —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π\n                async function fetchEvents() {\n                    try {\n                        const response = await fetch('/api/v1/employee/events', {\n                            headers: {\n                                'Authorization': `Bearer ${localStorage.getItem(ACCESS_TOKEN_KEY)}`\n                            }\n                        });\n                        return await response.json();\n                    } catch (error) {\n                        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π:', error);\n                        return [];\n                    }\n                }\n\n                async function addEvent(data) {\n                    try {\n                        const response = await fetch('/api/v1/employee/events', {\n                            method: 'POST',\n                            headers: {\n                                'Content-Type': 'application/json',\n                                'Authorization': `Bearer ${localStorage.getItem(ACCESS_TOKEN_KEY)}`\n                            },\n                            body: JSON.stringify(data)\n                        });\n\n                        if (!response.ok) throw await response.json();\n                        window.location.reload();\n                    } catch (error) {\n                        console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:', error);\n                        alert(error.error || '–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è');\n                    }\n                }\n\n                async function updateEvent(data) {\n                    try {\n                        const response = await fetch('/api/v1/employee/events', {\n                            method: 'PUT',\n                            headers: {\n                                'Content-Type': 'application/json',\n                                'Authorization': `Bearer ${localStorage.getItem(ACCESS_TOKEN_KEY)}`\n                            },\n                            body: JSON.stringify(data)\n                        });\n\n                        if (!response.ok) throw await response.json();\n                        window.location.reload();\n                    } catch (error) {\n                        console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:', error);\n                        alert(error.error || '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è');\n                    }\n                }\n\n                async function deleteEvent(id) {\n                    try {\n                        const response = await fetch('/api/v1/employee/events', {\n                            method: 'DELETE',\n                            headers: {\n                                'Content-Type': 'application/json',\n                                'Authorization': `Bearer ${localStorage.getItem(ACCESS_TOKEN_KEY)}`\n                            },\n                            body: JSON.stringify({ id })\n                        });\n \n                        if (!response.ok) throw await response.json();\n                        window.location.reload();\n                    } catch (error) {\n                        console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error);\n                        alert(error.error || '–ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ');\n                    }\n                }\n\n                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ\n                document.addEventListener('DOMContentLoaded', function() {\n                    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞\n                    dateBeginInput.addEventListener('change', function() {\n                        dateEndInput.min = this.value;\n                    });\n                });\n            </script></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = EmployeesNavigate("–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏").Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
